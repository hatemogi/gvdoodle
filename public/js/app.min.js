(function(){var a;a=angular.module("gvdoodle",["ui.bootstrap"]),a.controller("EditorCtrl",["$scope","$http","$sce","$modal",function(a,b,c,d){var e,f,g;return g=this,g.isLoading=!1,g.showPreview=!1,g.changed=!1,window.editor=e=ace.edit("editor"),e.setTheme("ace/theme/tomorrow"),e.getSession().setMode("ace/mode/dot"),e.focus(),e.on("change",function(){var b;if(g.loadedValue)return b=g.changed,g.changed=e.getValue()!==g.loadedValue,b!==g.changed?a.$apply():void 0}),this.engine="dot",this.preview="preview.svg",this.engines=["dot","neato","fdp","sfdp","twopi","circo"],f=function(b){return a.svg=c.trustAsHtml(b),g.showPreview=!0,g.isLoading=!1,console.log(["success",b])},this.loadSaved=function(a){return b.get("/"+a+".svg").success(f)},this.run=function(){return g.isLoading=!0,b.post("/preview",{text:e.getValue(),engine:g.engine}).success(f).error(function(a){return console.log(["error",a])})},this.publishModal=function(){return d.open({templateUrl:"template/publish"})},this.publish=function(){return g.isLoading=!0,b.post("/publish",{text:e.getValue(),engine:g.engine}).success(function(a){return window.location.href="/"+a.gvid}).error(function(a){return console.log(["publish error",a])})},this.img_load=function(a){return console.dir(a)},this.load=function(a){return b.get("/"+a+".gv").success(function(a){return e.setValue(a),e.clearSelection(),g.loadedValue=a}),b.get("/"+a+".meta").success(function(a,b){return a&&a.engine&&(g.engine=a.engine),b}),g.svg_url="/"+a+".svg",g.showPreview=!1,a},this}]),a.directive("resizable",function(){return{link:function(a,b){return b.bind("load",function(){return console.dir([b[0].width,b[0].height])})}}})}).call(this);
//# sourceMappingURL=app.min.js.map